(this.webpackJsonpeventbrite=this.webpackJsonpeventbrite||[]).push([[0],{25:function(e,t,a){e.exports=a(38)},30:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),i=(a(30),a(8)),o=a(15),s=a(6),u=(a(31),a(32),a(41)),m=a(42),d=a(20),p=a(45),v=a(46),b=a(43),E=a(44),f=a(5),h=a.n(f),g="2HFMBE2GUW52R2FYGTBQ";var w=function(){for(var e,t,a,n=[],l=0;l<=1440;l+=30)(t=l%60)<10&&(t="0"+t),a=(e=Math.floor(l/60))%24<12?"AM":"PM",0===(e%=12)&&(e=12),n.push(r.a.createElement("option",{key:l},e,":",t," ",a));return n},k=function(e,t){return e.setDate(e.getDate()+1),e.setHours(t,0,0,0),e},y=function(e,t){e.setHours(0,0,0,0);var a=t.split(" "),n=a[1],r=a[0].split(":"),l=parseInt(r[0]),c=parseInt(r[1]);return 12===l&&(l=0),"PM"===n&&(l+=12),e.setHours(l,c,0,0),e},O=function(e,t){var a=t.split("-"),n=e.getHours(),r=e.getMinutes(),l=parseInt(a[0]),c=parseInt(a[1]-1),i=parseInt(a[2]);return new Date(l,c,i,n,r,0,0)},j=function(e){var t=e.toLocaleTimeString();return t=t.slice(0,4)+t.slice(7)},C=function(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString();a=a<10?"0"+a:a;var n=e.getDate().toString();return n=n<10?"0"+n:n,"".concat(t,"-").concat(a,"-").concat(n)},S=function(e,t){return(Date.parse(t)-Date.parse(e))/1e3},x=function(e,t){return!(Date.parse(e)>=Date.parse(t))},N=function(e,t){return e.length<=t},D={title:{valid:null,invalid:null},date:{valid:null,invalid:null},image:{valid:null,invalid:null},organizer:{valid:null,invalid:null},ticketName:{valid:null,invalid:null},numberOfTickets:{valid:null,invalid:null},price:{valid:null,invalid:null}},T=function(e,t,a,n,r,l){return{event:{name:{html:e},description:{html:t},start:{timezone:"America/Los_Angeles",utc:a.toJSON().slice(0,19)+"Z"},end:{timezone:"America/Los_Angeles",utc:n.toJSON().slice(0,19)+"Z"},currency:"USD",logo_id:r,is_series:l}}};var L=function(){var e=Object(n.useState)(k(new Date,0)),t=Object(s.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(k(new Date,1)),f=Object(s.a)(c,2),L=f[0],F=f[1],M=Object(n.useState)(k(new Date,1)),_=Object(s.a)(M,2),I=_[0],G=_[1],A=Object(n.useState)(0),U=Object(s.a)(A,2),J=U[0],q=U[1],R=Object(n.useState)(0),V=Object(s.a)(R,2),H=V[0],P=V[1],z=Object(n.useState)(""),B=Object(s.a)(z,2),W=B[0],Q=B[1],Y=Object(n.useState)(""),Z=Object(s.a)(Y,2),K=Z[0],$=Z[1],X=Object(n.useState)(null),ee=Object(s.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(null),re=Object(s.a)(ne,2),le=re[0],ce=re[1],ie=Object(n.useState)(""),oe=Object(s.a)(ie,2),se=oe[0],ue=oe[1],me=Object(n.useState)(100),de=Object(s.a)(me,2),pe=de[0],ve=de[1],be=Object(n.useState)(0),Ee=Object(s.a)(be,2),fe=Ee[0],he=Ee[1],ge=Object(n.useState)(D),we=Object(s.a)(ge,2),ke=we[0],ye=we[1],Oe=Object(n.useState)(null),je=Object(s.a)(Oe,2),Ce=je[0],Se=je[1],xe=function(e,t){ye(e?Object(o.a)({},ke,Object(i.a)({},t,{valid:e})):Object(o.a)({},ke,Object(i.a)({},t,{invalid:!e})))},Ne=function(e,t){for(var a=[],n=e,r=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};n<=t;)a.push(n),n=r.call(n,7);return a.length},De=function(e){var t,n,r;switch(e.target.name){case"title":N(e.target.value,70)&&e.target.value.length>0?xe(!0,"title"):xe(!1,"title"),Q(e.target.value);break;case"ticketName":N(e.target.value,70)&&e.target.value.length>0?xe(!0,"ticketName"):xe(!1,"ticketName"),ue(e.target.value);break;case"from":t=y(a,e.target.value),x(t,I)?xe(!0,"date"):xe(!1,"date"),l(t),P(S(t,L));break;case"to":t=y(I,e.target.value),r=y(L,e.target.value),x(a,t)?xe(!0,"date"):xe(!1,"date"),G(t),F(r),P(S(a,r));break;case"occursFrom":t=O(a,e.target.value),x(t,I)?xe(!0,"date"):xe(!1,"date"),l(t),n=Ne(t,I),q(n);break;case"occursUntil":t=O(I,e.target.value),x(a,t)?xe(!0,"date"):xe(!1,"date"),G(t),n=Ne(a,t),q(n);break;case"description":$(e.target.value);break;case"numberOfTickets":ve(e.target.value);break;case"price":he(e.target.value)}};return r.a.createElement("main",null,r.a.createElement(u.a,null,r.a.createElement(m.a,{className:"justify-content-md-center"},r.a.createElement(d.a,{md:"auto"},r.a.createElement("h1",null,"eventbrite"))),r.a.createElement(m.a,{className:"justify-content-md-center"},r.a.createElement(d.a,{md:"auto"},r.a.createElement("h4",null,"Create A Repeating Event"))),r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a,{onSubmit:function(e){e.preventDefault();if(Object.keys(ke).every((function(e){var t=ke[e].valid;return!0===t||null===t}))){e.stopPropagation();var t=T(W,K,L,I,le,J>1);try{(function(e){var t,a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.a.awrap(fetch("https://www.eventbriteapi.com/v3/organizations/64592771355/events/?token=".concat(g),{method:"post",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}));case 2:return t=n.sent,n.next=5,h.a.awrap(t.json());case 5:return a=n.sent,n.abrupt("return",a);case 7:case"end":return n.stop()}}))})(t).then((function(e){return Se(e.url),console.log(e),e})).then((function(e){if(J>1){var t="DTSTART:".concat(a.toJSON(),"\nRRULE:FREQ=WEEKLY;COUNT=").concat(J,"\n              ");!function(e,t,a){var n,r;h.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,h.a.awrap(fetch("https://www.eventbriteapi.com/v3/events/".concat(e,"/schedules/?token=").concat(g),{method:"post",body:JSON.stringify({schedule:{occurrence_duration:t,recurrence_rule:a}}),headers:{"Content-Type":"application/json"}}));case 2:return n=l.sent,l.next=5,h.a.awrap(n.json());case 5:return r=l.sent,console.log(r),l.abrupt("return",r);case 8:case"end":return l.stop()}}))}(e.id,H,t)}return e})).then((function(e){return function(e,t,a,n){var r,l;h.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(0!==t){c.next=6;break}return c.next=3,h.a.awrap(fetch(" https://www.eventbriteapi.com/v3/events/".concat(e,"/ticket_classes/?token=").concat(g),{method:"post",body:JSON.stringify({ticket_class:{name:n,quantity_total:a,free:!0}}),headers:{"Content-Type":"application/json"}}));case 3:r=c.sent,c.next=9;break;case 6:return c.next=8,h.a.awrap(fetch(" https://www.eventbriteapi.com/v3/events/".concat(e,"/ticket_classes/?token=").concat(g),{method:"post",body:JSON.stringify({ticket_class:{name:n,quantity_total:a,cost:"USD, ".concat(t)}}),headers:{"Content-Type":"application/json"}}));case 8:r=c.sent;case 9:return c.next=11,h.a.awrap(r.json());case 11:return l=c.sent,console.log(l),c.abrupt("return",l);case 14:case"end":return c.stop()}}))}(e.id,fe,pe,se),e})).then((function(e){!function(e){var t;h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fetch("https://www.eventbriteapi.com/v3/events/".concat(e,"/publish/?token=").concat(g),{method:"post",headers:{"Content-Type":"application/json"}}));case 2:return t=a.sent,a.next=5,h.a.awrap(t.json());case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}))}(e.id)}))}catch(n){console.log(n.message)}}else console.log("invalid")}},r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Title"),r.a.createElement(p.a.Control,{required:!0,isInvalid:ke.title.invalid,isValid:ke.title.valid,name:"title",type:"text",maxLength:"70",placeholder:"Give it a short distinct name",value:W,onChange:De}),r.a.createElement(p.a.Control.Feedback,{type:"valid"},"Looks Good"),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"A Title is required")),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Location"),r.a.createElement(p.a.Control,{disabled:!0,defaultValue:"San Francisco"})),r.a.createElement(p.a.Group,null,r.a.createElement("h5",null,"Schedule Dates")),r.a.createElement(p.a.Group,null,r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"How Often?"),r.a.createElement(p.a.Control,{disabled:!0,defaultValue:"Weekly"})))),r.a.createElement(p.a.Group,null,r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"From"),r.a.createElement(p.a.Control,{required:!0,name:"from",onChange:De,value:j(a),isInvalid:ke.date.invalid,isValid:ke.date.valid,as:"select"},w()),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must be before end time.")),r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"To"),r.a.createElement(p.a.Control,{required:!0,name:"to",onChange:De,value:j(I),as:"select",isInvalid:ke.date.invalid,isValid:ke.date.valid},w()),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must be before end time."))),r.a.createElement(m.a,null,r.a.createElement(d.a,null,H>0?r.a.createElement(v.a,{className:"eventlist",variant:"success"},"Duration of ",H/60," Minutes"):""))),r.a.createElement(p.a.Group,null,r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"Occurs From"),r.a.createElement(p.a.Control,{name:"occursFrom",type:"date",min:C(k(new Date,0)),onChange:De,value:C(a),isInvalid:ke.date.invalid,isValid:ke.date.valid}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must be before end date.")),r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"Occurs Until"),r.a.createElement(p.a.Control,{name:"occursUntil",type:"date",onChange:De,min:C(k(new Date,1)),value:C(I),isInvalid:ke.date.invalid,isValid:ke.date.valid}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must be after start date."))),r.a.createElement(m.a,null,r.a.createElement(d.a,null,J>0?r.a.createElement(v.a,{className:"eventlist",variant:"success"},J," Events"):""))),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Event Image"),r.a.createElement(m.a,null,r.a.createElement(d.a,{className:"image-upload"},r.a.createElement("div",{className:"img-upload-inner"},r.a.createElement(p.a.Control,{className:"inputfile",id:"file",type:"file",onChange:function(e){if(e.currentTarget.files[0]){var t=e.currentTarget.files[0];ae(URL.createObjectURL(t)),function(){var e,t;return h.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.awrap(fetch("https://www.eventbriteapi.com/v3/media/upload/?type=image-event-logo&token=".concat(g)));case 2:return e=a.sent,a.next=5,h.a.awrap(e.json());case 5:return t=a.sent,a.abrupt("return",t);case 7:case"end":return a.stop()}}))}().then((function(e){(function(e,t,a){var n,r,l,c;return h.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:for(r in n=new FormData,a)n.append(r,a[r]);return n.append("file",e),i.prev=3,l={method:"POST",body:n},i.next=7,h.a.awrap(fetch(t,l));case 7:if((c=i.sent).ok){i.next=10;break}throw new Error(c.statusText);case 10:return i.abrupt("return",c);case 13:i.prev=13,i.t0=i.catch(3),console.log(i.t0.message);case 16:case"end":return i.stop()}}),null,null,[[3,13]])})(t,e.upload_url,e.upload_data).then((function(){return function(e){var t,a;return h.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,(t=new FormData).append("upload_token",e),n.next=5,h.a.awrap(fetch("https://www.eventbriteapi.com/v3/media/upload/?token=".concat(g),{method:"POST",body:t}));case 5:return a=n.sent,n.next=8,h.a.awrap(a.json());case 8:return n.abrupt("return",n.sent);case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0.message);case 14:case"end":return n.stop()}}),null,null,[[0,11]])}(e.upload_token)})).then((function(e){ce(e.id),ae(e.url)}))}))}},accept:"image/png, image/jpeg",isInvalid:!0}),r.a.createElement(p.a.Label,{htmlFor:"file"},te?r.a.createElement(b.a,{alt:"banner",src:te,fluid:!0}):r.a.createElement("div",null," ",r.a.createElement("i",{className:"fa fa-camera"}),r.a.createElement("h6",null,"Add Event Image"),r.a.createElement("p",null,"Choose a compelling image that brings your event to life"))),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must be less than 10MB."))))),r.a.createElement(p.a.Group,null,r.a.createElement(p.a.Label,null,"Event Description"),r.a.createElement(p.a.Control,{as:"textarea",rows:"4",name:"description",onChange:De,value:K})),r.a.createElement(p.a.Group,null,r.a.createElement(m.a,null,r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"Ticket Name"),r.a.createElement(p.a.Control,{required:!0,type:"text",value:se,name:"ticketName",onChange:De,placeholder:"Ticket Name",isValid:ke.ticketName.valid,isInvalid:ke.ticketName.invalid}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Ticket name is required.")),r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"Quantity Available"),r.a.createElement(p.a.Control,{value:pe,min:"1",max:"30000",name:"numberOfTickets",onChange:De,type:"number",placeholder:"100"}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must have one or more tickets.")),r.a.createElement(d.a,null,r.a.createElement(p.a.Label,null,"Price"),r.a.createElement(p.a.Control,{type:"number",min:"0.00",max:"10000.00",step:"0.01",placeholder:"Free",name:"price",value:fe,onChange:De}),r.a.createElement(p.a.Control.Feedback,{type:"invalid"},"Must be a postitive number that is less than 10000")))),r.a.createElement(E.a,{variant:"success",type:"submit",size:"lg"},"Create Event"))))),r.a.createElement(m.a,null,r.a.createElement(d.a,null,Ce?r.a.createElement(v.a,{className:"eventlist",variant:"success"},r.a.createElement("h6",null,"List of Events"),r.a.createElement("a",{href:Ce},Ce)):"")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[25,1,2]]]);
//# sourceMappingURL=main.16f21847.chunk.js.map